# =============================================================================
# Crypto AI Trading System - ç¯å¢ƒé…ç½®æ¨¡æ¿
# =============================================================================
# ä½¿ç”¨æ–¹æ³•ï¼š
# 1. å¤åˆ¶æ­¤æ–‡ä»¶ä¸º .envï¼šcp .env.example .env
# 2. æ ¹æ®å®é™…ç¯å¢ƒä¿®æ”¹é…ç½®å€¼
# 3. ç¡®ä¿ .env æ–‡ä»¶ä¸æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ

# =============================================================================
# åŸºç¡€åº”ç”¨é…ç½®
# =============================================================================
APP_NAME=Crypto AI Trading System
VERSION=0.1.0
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO
SECRET_KEY=your-super-secret-key-change-in-production-please-use-strong-key

# æœåŠ¡å™¨é…ç½®
HOST=0.0.0.0
PORT=8000

# CORSé…ç½®
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# =============================================================================
# æ•°æ®åº“é…ç½®
# =============================================================================
DATABASE_URL=postgresql+asyncpg://crypto_trading:your_secure_password@localhost:5432/crypto_trading_db
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# PostgreSQL é…ç½®ä¼˜åŒ–ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
POSTGRES_SHARED_PRELOAD_LIBS=pg_stat_statements
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_PRELOAD_LIBRARIES=timescaledb

# =============================================================================
# Redisé…ç½®
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20

# =============================================================================
# LLM APIé…ç½®
# =============================================================================
# OpenAI é…ç½®
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1  # å¯é€‰ï¼šè‡ªå®šä¹‰OpenAIå…¼å®¹ç«¯ç‚¹
OPENAI_ORGANIZATION=your_organization_id          # å¯é€‰ï¼šç»„ç»‡ID
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.1
OPENAI_TIMEOUT=60
OPENAI_MAX_RETRIES=3

# OpenAIå…¼å®¹ç«¯ç‚¹ç¤ºä¾‹ï¼ˆå–æ¶ˆæ³¨é‡Šä½¿ç”¨ï¼‰ï¼š
# SiliconFlow:
# OPENAI_BASE_URL=https://api.siliconflow.cn/v1
# OPENAI_API_KEY=your_siliconflow_api_key

# DeepSeek:
# OPENAI_BASE_URL=https://api.deepseek.com/v1
# OPENAI_API_KEY=your_deepseek_api_key

# Azure OpenAI:
# OPENAI_BASE_URL=https://your-resource.openai.azure.com/openai/deployments/your-deployment
# OPENAI_API_KEY=your_azure_openai_key
# OPENAI_API_VERSION=2024-02-15-preview

# Anthropic é…ç½®
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-3-sonnet-20240229
ANTHROPIC_MAX_TOKENS=4096

# Google é…ç½®ï¼ˆå¯é€‰ï¼‰
GOOGLE_API_KEY=your_google_api_key_here

# =============================================================================
# JWTè®¤è¯é…ç½®
# =============================================================================
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# äº¤æ˜“æ‰€APIé…ç½®
# =============================================================================
# Binance
BINANCE_API_KEY=your_binance_api_key
BINANCE_API_SECRET=your_binance_api_secret
BINANCE_TESTNET=false

# Coinbase Pro
COINBASE_API_KEY=your_coinbase_api_key
COINBASE_API_SECRET=your_coinbase_api_secret
COINBASE_API_PASSPHRASE=your_coinbase_passphrase

# Kraken
KRAKEN_API_KEY=your_kraken_api_key
KRAKEN_API_SECRET=your_kraken_api_secret

# Huobiï¼ˆå¯é€‰ï¼‰
# HUOBI_API_KEY=your_huobi_api_key
# HUOBI_API_SECRET=your_huobi_api_secret

# OKExï¼ˆå¯é€‰ï¼‰
# OKEX_API_KEY=your_okex_api_key
# OKEX_API_SECRET=your_okex_api_secret

# =============================================================================
# äº¤æ˜“ç³»ç»Ÿé…ç½®
# =============================================================================
TRADING_ENABLED=false
MAX_CONCURRENT_ANALYSIS=20
ANALYSIS_INTERVAL_MINUTES=1
DEFAULT_RISK_LEVEL=medium
MAX_POSITION_SIZE_PERCENT=0.25

# =============================================================================
# ä»»åŠ¡é˜Ÿåˆ—é…ç½®
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=UTC

# =============================================================================
# ç›‘æ§é…ç½®
# =============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# Grafanaé…ç½®ï¼ˆå¯é€‰ï¼‰
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=your_grafana_password

# =============================================================================
# å‘Šè­¦é…ç½®
# =============================================================================
# é‚®ä»¶å‘Šè­¦
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_SMTP_HOST=smtp.gmail.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USERNAME=your_email@gmail.com
ALERT_EMAIL_PASSWORD=your_email_password
ALERT_EMAIL_TO=admin@yourcompany.com
ALERT_EMAIL_FROM=system@yourcompany.com

# Slackå‘Šè­¦ï¼ˆå¯é€‰ï¼‰
SLACK_WEBHOOK_ENABLED=false
SLACK_WEBHOOK_URL=your_slack_webhook_url
SLACK_CHANNEL=#trading-alerts

# çŸ­ä¿¡å‘Šè­¦ï¼ˆå¯é€‰ï¼‰
SMS_ALERT_ENABLED=false
SMS_API_KEY=your_sms_api_key
SMS_PHONE_NUMBER=+1234567890

# =============================================================================
# æ€§èƒ½é…ç½®
# =============================================================================
# APIé™æµé…ç½®
API_RATE_LIMIT=1000  # æ¯åˆ†é’Ÿè¯·æ±‚æ•°
API_RATE_WINDOW=60    # çª—å£æ—¶é—´ï¼ˆç§’ï¼‰

# ç¼“å­˜é…ç½®
CACHE_TTL=300        # é»˜è®¤ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
CACHE_MAX_SIZE=1000  # æœ€å¤§ç¼“å­˜æ¡ç›®æ•°

# è¿æ¥æ± é…ç½®
MAX_CONNECTIONS_PER_HOST=50
CONNECTION_TIMEOUT=30
READ_TIMEOUT=30
WRITE_TIMEOUT=30

# =============================================================================
# æ—¥å¿—é…ç½®
# =============================================================================
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_ROTATION=daily

# æ—¥å¿—çº§åˆ«ï¼ˆå¯é€‰ï¼Œè¦†ç›–DEBUGè®¾ç½®ï¼‰
# OPENAI_LOG_LEVEL=DEBUG
# TRADING_LOG_LEVEL=INFO
# API_LOG_LEVEL=INFO

# =============================================================================
# å®‰å…¨é…ç½®
# =============================================================================
# APIå¯†é’¥è½®æ¢
API_KEY_ROTATION_ENABLED=false
API_KEY_ROTATION_INTERVAL=86400  # 24å°æ—¶

# IPç™½åå•
IP_WHITELIST_ENABLED=true
IP_WHITELIST=127.0.0.1,::1

# å®‰å…¨å¤´
SECURITY_HEADERS_ENABLED=true
CORS_ENABLED=true
HTTPS_ONLY=false  # ç”Ÿäº§ç¯å¢ƒå»ºè®®è®¾ä¸ºtrue

# =============================================================================
# å¼€å‘é…ç½®
# =============================================================================
# è‡ªåŠ¨é‡è½½ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
AUTO_RELOAD=false

# è°ƒè¯•æ¨¡å¼
DEBUG_SQL=false
DEBUG_REQUESTS=false

# æµ‹è¯•æ•°æ®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
LOAD_TEST_DATA=true
MOCK_EXTERNAL_APIS=false

# =============================================================================
# ç”Ÿäº§ç¯å¢ƒç‰¹å®šé…ç½®
# =============================================================================
# ä»…åœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨ä»¥ä¸‹é…ç½®
# WORKERS=4
# MEMORY_LIMIT=2Gi
# CPU_LIMIT=1000m
# DISK_LIMIT=10Gi

# å¤‡ä»½é…ç½®
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *  # æ¯å¤©å‡Œæ™¨2ç‚¹
BACKUP_RETENTION_DAYS=30

# å¥åº·æ£€æŸ¥
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5

# ä¼˜é›…å…³é—­
GRACEFUL_SHUTDOWN_TIMEOUT=30

# =============================================================================
# å¼€å‘å·¥å…·é…ç½®
# =============================================================================
# æ•°æ®åº“è¿ç§»
ALEMBIC_CONFIG_FILE=alembic.ini
ALEMBIC_MIGRATIONS_DIR=migrations

# ä»£ç è´¨é‡æ£€æŸ¥
PYLINT_ENABLED=false
BLACK_ENABLED=false
ISORT_ENABLED=false
MYPYTHON_ENABLED=false

# æµ‹è¯•é…ç½®
TEST_DATABASE_URL=postgresql+asyncpg://test_user:test_password@localhost:5432/crypto_trading_test
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# Dockeré…ç½®ï¼ˆå¯é€‰ï¼‰
# =============================================================================
# å¦‚æœä½¿ç”¨Dockerï¼Œä»¥ä¸‹é…ç½®ä¼šè¢«Dockerç¯å¢ƒå˜é‡è¦†ç›–
# POSTGRES_DB=crypto_trading_db
# POSTGRES_USER=crypto_trading
# POSTGRES_PASSWORD=your_secure_password
# REDIS_PASSWORD=your_redis_password

# =============================================================================
# ç¯å¢ƒç‰¹å®šé…ç½®
# =============================================================================
# å¼€å‘ç¯å¢ƒé…ç½®
if [ "$ENVIRONMENT" = "development" ]; then
    DEBUG=true
    LOG_LEVEL=DEBUG
    AUTO_RELOAD=true
    TRADING_ENABLED=false
    PROMETHEUS_ENABLED=false
fi

# æµ‹è¯•ç¯å¢ƒé…ç½®
if [ "$ENVIRONMENT" = "testing" ]; then
    DEBUG=false
    LOG_LEVEL=WARNING
    TRADING_ENABLED=false
    CELERY_ALWAYS_EAGER=true
    PROMETHEUS_ENABLED=false
fi

# ç”Ÿäº§ç¯å¢ƒé…ç½®
if [ "$ENVIRONMENT" = "production" ]; then
    DEBUG=false
    LOG_LEVEL=WARNING
    HTTPS_ONLY=true
    API_KEY_ROTATION_ENABLED=true
    BACKUP_ENABLED=true
    PROMETHEUS_ENABLED=true
    WORKERS=4
fi

# =============================================================================
# é…ç½®éªŒè¯
# =============================================================================
# ä½¿ç”¨é…ç½®éªŒè¯è„šæœ¬æ£€æŸ¥é…ç½®ï¼š
# python backend/scripts/validate_openai_config.py

# éªŒè¯å¿…è¦é…ç½®
required_configs=(
    "SECRET_KEY"
    "DATABASE_URL"
    "REDIS_URL"
)

# ç”Ÿæˆé…ç½®æ‘˜è¦
echo "=============================================="
echo "Crypto AI Trading System é…ç½®"
echo "=============================================="
echo "ç¯å¢ƒ: $ENVIRONMENT"
echo "æ•°æ®åº“: $DATABASE_URL"
echo "ç¼“å­˜: $REDIS_URL"
echo "LLMæä¾›å•†: OpenAI"
echo "äº¤æ˜“æ‰€é…ç½®: Binance, Coinbase, Kraken"
echo "=============================================="

# é…ç½®å®Œæˆæç¤º
echo ""
echo "âœ… é…ç½®æ¨¡æ¿å·²å‡†å¤‡å°±ç»ª"
echo "ğŸ“ è¯·æ ¹æ®å®é™…ç¯å¢ƒä¿®æ”¹ .env æ–‡ä»¶ä¸­çš„é…ç½®å€¼"
echo "ğŸ”’ ç¡®ä¿ .env æ–‡ä»¶ä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"
echo "ğŸš€ ä½¿ç”¨é…ç½®éªŒè¯è„šæœ¬æ£€æŸ¥é…ç½®: python backend/scripts/validate_openai_config.py"
echo ""