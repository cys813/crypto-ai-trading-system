# å¤šAgentåŠ å¯†è´§å¸é‡åŒ–äº¤æ˜“åˆ†æç³»ç»Ÿ - å¿«é€Ÿå¼€å§‹æŒ‡å—

**ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2025-10-08

## ğŸš€ ç³»ç»Ÿæ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºPythonçš„å¤šAgentè™šæ‹Ÿè´§å¸é‡åŒ–äº¤æ˜“åˆ†æå¹³å°ï¼Œé›†æˆäº†5ä¸ªä¸“ä¸šagentï¼š

1. **æ–°é—»æ”¶é›†Agent** - è‡ªåŠ¨æ”¶é›†å’Œåˆ†æåŠ å¯†è´§å¸ç›¸å…³æ–°é—»ï¼ˆ15å¤©å†…æœ€å¤š50æ¡ï¼‰
2. **åšå¤šåˆ†æAgent** - åŸºäºæŠ€æœ¯åˆ†æç”Ÿæˆåšå¤šç­–ç•¥ï¼ˆä¼ ç»Ÿé‡åŒ–+LLMå¢å¼ºï¼‰
3. **åšç©ºåˆ†æAgent** - ä¸“é—¨è¯†åˆ«åšç©ºæœºä¼šå’Œé£é™©ï¼ˆæ³¨é‡æ•æ‰åšç©ºä¿¡å·ï¼‰
4. **ç­–ç•¥ç”ŸæˆAgent** - ç»¼åˆå¤šç»´åº¦ä¿¡æ¯ç”Ÿæˆæœ€ç»ˆäº¤æ˜“ç­–ç•¥ï¼ˆå…¥åœºä»·ã€æ–¹å‘ã€ä»“ä½ï¼‰
5. **äº¤æ˜“æ‰§è¡ŒAgent** - è‡ªåŠ¨æ‰§è¡Œäº¤æ˜“å¹¶ç®¡ç†é£é™©ï¼ˆå®Œå…¨è‡ªåŠ¨åŒ–ï¼Œæ— éœ€äººå·¥å¹²é¢„ï¼‰

### æ ¸å¿ƒç‰¹æ€§
- ğŸ¤– **å®Œå…¨è‡ªåŠ¨åŒ–**: ç³»ç»Ÿè‡ªä¸»åˆ†æã€å†³ç­–å’Œæ‰§è¡Œï¼Œæ— éœ€äººå·¥ç¡®è®¤
- ğŸ“Š **åŠ¨æ€èµ„é‡‘ç®¡ç†**: æ ¹æ®ç­–ç•¥ç½®ä¿¡åº¦å’Œå¸‚åœºæ³¢åŠ¨åŠ¨æ€è°ƒæ•´èµ„é‡‘è§„æ¨¡
- ğŸ“± **ç§»åŠ¨ç«¯ç›‘æ§**: æ”¯æŒæ‰‹æœºæŸ¥çœ‹äº¤æ˜“çŠ¶æ€å’Œæ¥æ”¶é‡è¦è­¦æŠ¥
- ğŸ”„ **æ··åˆå­˜å‚¨**: çƒ­æ•°æ®ç”¨PostgreSQL+TimescaleDBï¼Œå†·æ•°æ®ç”¨æ–‡ä»¶ç³»ç»Ÿ
- ğŸ›¡ï¸ **é£é™©æ§åˆ¶**: è‡ªåŠ¨æ­¢ç›ˆæ­¢æŸã€è®¢å•è¶…æ—¶å–æ¶ˆã€ä»“ä½ç®¡ç†

### ç³»ç»Ÿæ¶æ„ä¼˜åŠ¿
- **å¤šLLMé›†æˆ**: æ ¹æ®ä¸åŒä»»åŠ¡é€‰æ‹©æœ€é€‚åˆçš„LLMæœåŠ¡
- **å®æ—¶åˆ†æ**: 5åˆ†é’Ÿå†…å®Œæˆå®Œæ•´çš„å¸‚åœºåˆ†ææµç¨‹
- **é«˜å¹¶å‘å¤„ç†**: æ”¯æŒæœ€å¤š50ä¸ªäº¤æ˜“å¯¹å¹¶å‘åˆ†æ
- **7x24å°æ—¶è¿è¡Œ**: 99.5%ç³»ç»Ÿå¯ç”¨æ€§ä¿è¯
- **æˆæœ¬æ§åˆ¶**: å®Œå–„çš„LLMæˆæœ¬ç›‘æ§å’Œé¢„è­¦æœºåˆ¶

## ğŸ“‹ å‰ç½®è¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 20.04+ æ¨è CentOS 8+)
- **Python**: 3.11+
- **å†…å­˜**: æœ€ä½ 8GBï¼Œæ¨è 32GB
- **å­˜å‚¨**: SSD 100GB+
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### å¤–éƒ¨æœåŠ¡
- **PostgreSQL**: 16.3+ (éœ€è¦TimescaleDBæ‰©å±•)
- **Redis**: 6.0+
- **äº¤æ˜“æ‰€API**: Binanceã€Coinbaseã€Krakenã€Huobiã€OKEx APIå¯†é’¥
- **LLMæœåŠ¡**: OpenAIã€Anthropicç­‰APIå¯†é’¥

## ğŸ› ï¸ å®‰è£…éƒ¨ç½²

### æ–¹å¼ä¸€ï¼šDockerå®¹å™¨åŒ–éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### ç³»ç»Ÿæ¶æ„ä¼˜åŠ¿
- **ç®€åŒ–éƒ¨ç½²**: ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
- **ç¯å¢ƒä¸€è‡´**: å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´
- **æ˜“äºæ‰©å±•**: æ”¯æŒæ°´å¹³æ‰©å±•å’Œè´Ÿè½½å‡è¡¡
- **æ•…éšœéš”ç¦»**: å®¹å™¨çº§åˆ«çš„æ•…éšœéš”ç¦»
- **èµ„æºç®¡ç†**: ç²¾ç¡®æ§åˆ¶èµ„æºä½¿ç”¨

#### å¿«é€Ÿå¯åŠ¨

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/crypto-ai-trading.git
cd crypto-ai-trading

# 2. å¤åˆ¶é…ç½®æ–‡ä»¶
cp config/docker-compose.yml.example docker-compose.yml
cp config/.env.example .env

# 3. é…ç½®APIå¯†é’¥
nano .env  # ç¼–è¾‘APIå¯†é’¥é…ç½®

# 4. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 5. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

è¯¦ç»†Dockeréƒ¨ç½²æŒ‡å—è¯·å‚è€ƒï¼š[Dockerå®¹å™¨åŒ–éƒ¨ç½²æŒ‡å—](docker-deployment.md)

---

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…éƒ¨ç½²

#### 1. ç¯å¢ƒå‡†å¤‡

```bash
# æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update && sudo apt upgrade -y

# å®‰è£…Python 3.11+
sudo apt install python3.11 python3.11-pip python3.11-venv -y

# å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt install build-essential libpq-dev curl git -y

# å®‰è£…Dockerå’ŒDocker Composeï¼ˆå¯é€‰ï¼Œç”¨äºç›‘æ§æœåŠ¡ï¼‰
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo curl -L "https://github.com/docker/compose/releases/download/v2.21.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

#### 2. æ•°æ®åº“é…ç½®

```bash
# å®‰è£…PostgreSQL 16
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
echo "deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main" | sudo tee /etc/apt/sources.list.d/pgdg.list
sudo apt update
sudo apt install postgresql-16 postgresql-client-16 timescaledb-2-postgresql-16 -y

# å¯åŠ¨æœåŠ¡
sudo systemctl start postgresql
sudo systemctl enable postgresql

# åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·
sudo -u postgres createuser --interactive crypto_trading
sudo -u postgres createdb -O crypto_trading crypto_trading_db

# é…ç½®TimescaleDB
sudo -u postgres psql -d crypto_trading_db -c "CREATE EXTENSION IF NOT EXISTS timescaledb;"

# å®‰è£…Redis
sudo apt install redis-server -y
sudo systemctl start redis-server
sudo systemctl enable redis-server
```

### 3. åº”ç”¨éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®ï¼ˆå‡è®¾ä»Gitä»“åº“ï¼‰
git clone https://github.com/your-org/crypto-ai-trading.git
cd crypto-ai-trading

# åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ
python3.11 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install --upgrade pip
pip install -r requirements.txt

# å¤åˆ¶é…ç½®æ–‡ä»¶
cp config/config.yaml.example config/config.yaml
cp config/.env.example config/.env
```

### 4. é…ç½®æ–‡ä»¶è®¾ç½®

ç¼–è¾‘ `config/config.yaml`:

```yaml
# æ•°æ®åº“é…ç½®
database:
  url: "postgresql://crypto_trading:your_password@localhost:5432/crypto_trading_db"
  pool_size: 20
  max_overflow: 30

# Redisé…ç½®
redis:
  host: "localhost"
  port: 6379
  db: 0
  password: null

# äº¤æ˜“æ‰€APIé…ç½®
exchanges:
  binance:
    api_key: "${BINANCE_API_KEY}"
    api_secret: "${BINANCE_API_SECRET}"
    testnet: false

  coinbase:
    api_key: "${COINBASE_API_KEY}"
    api_secret: "${COINBASE_API_SECRET}"

  # ... å…¶ä»–äº¤æ˜“æ‰€é…ç½®

# LLMæœåŠ¡é…ç½®
llm:
  openai:
    api_key: "${OPENAI_API_KEY}"
    model: "gpt-4-turbo"
    max_tokens: 4000

  anthropic:
    api_key: "${ANTHROPIC_API_KEY}"
    model: "claude-3-5-sonnet-20241022"

# ç³»ç»Ÿé…ç½®
system:
  max_concurrent_analysis: 10
  analysis_interval_minutes: 5
  risk_management:
    max_position_size_percent: 20
    stop_loss_percent: 5
    take_profit_percent: 15
```

ç¼–è¾‘ `config/.env`:

```bash
# æ•°æ®åº“å¯†ç 
DB_PASSWORD=your_secure_password

# äº¤æ˜“æ‰€APIå¯†é’¥
BINANCE_API_KEY=your_binance_api_key
BINANCE_API_SECRET=your_binance_api_secret
COINBASE_API_KEY=your_coinbase_api_key
COINBASE_API_SECRET=your_coinbase_api_secret

# LLMæœåŠ¡APIå¯†é’¥
OPENAI_API_KEY=your_openai_api_key
ANTHROPIC_API_KEY=your_anthropic_api_key

# ç³»ç»Ÿé…ç½®
LOG_LEVEL=INFO
DEBUG=false
```

### 5. æ•°æ®åº“åˆå§‹åŒ–

```bash
# è¿è¡Œæ•°æ®åº“è¿ç§»
python manage.py migrate

# åˆ›å»ºè¶…çº§ç”¨æˆ·
python manage.py createsuperuser

# åˆå§‹åŒ–åŸºç¡€æ•°æ®
python manage.py init_data
```

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨ç³»ç»Ÿ

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# å¯åŠ¨ä¸»æœåŠ¡
python main.py

# æˆ–ä½¿ç”¨systemdæœåŠ¡
sudo systemctl start crypto-ai-trading
```

### 2. éªŒè¯å®‰è£…

```bash
# æ£€æŸ¥ç³»ç»Ÿå¥åº·çŠ¶æ€
curl http://localhost:8000/v1/health

# é¢„æœŸå“åº”
{
  "status": "healthy",
  "timestamp": "2025-10-08T10:00:00Z",
  "version": "1.0.0",
  "components": {
    "database": "healthy",
    "redis": "healthy",
    "llm_services": "healthy",
    "exchanges": {
      "binance": "online",
      "coinbase": "online"
    }
  }
}
```

### 3. åˆ›å»ºç¬¬ä¸€ä¸ªäº¤æ˜“ç­–ç•¥

```bash
# ä½¿ç”¨APIåˆ›å»ºç­–ç•¥
curl -X POST http://localhost:8000/v1/strategies \
  -H "Authorization: Bearer your_token" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "BTCåšå¤šç­–ç•¥",
    "symbol": "BTC/USDT",
    "strategy_type": "long",
    "position_size": 0.1,
    "stop_loss_percent": 5,
    "take_profit_percent": 15
  }'
```

### 4. æ‰§è¡Œå¸‚åœºåˆ†æ

```bash
# å¯åŠ¨ç»¼åˆåˆ†æ
curl -X POST http://localhost:8000/v1/analysis/generate \
  -H "Authorization: Bearer your_token" \
  -H "Content-Type: application/json" \
  -d '{
    "symbol": "BTC/USDT",
    "exchange": "binance",
    "timeframe": "1h",
    "analysis_depth": "standard"
  }'
```

## ğŸ“± ç§»åŠ¨ç«¯ç›‘æ§

### React Nativeåº”ç”¨è®¾ç½®

```bash
# å…‹éš†ç§»åŠ¨ç«¯é¡¹ç›®
git clone https://github.com/your-org/crypto-trading-mobile.git
cd crypto-trading-mobile

# å®‰è£…ä¾èµ–
npm install
cd ios && pod install && cd ..

# é…ç½®APIç«¯ç‚¹
# ç¼–è¾‘ src/config/api.ts
export const API_BASE_URL = 'https://your-domain.com/v1';

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start

# è¿è¡ŒiOSåº”ç”¨
npm run ios

# è¿è¡ŒAndroidåº”ç”¨
npm run android
```

### ç§»åŠ¨ç«¯åŠŸèƒ½

- **å®æ—¶ç›‘æ§**: äº¤æ˜“çŠ¶æ€ã€æŒä»“ä¿¡æ¯ã€ç›ˆäºæƒ…å†µ
- **æ™ºèƒ½è­¦æŠ¥**: æ­¢ç›ˆæ­¢æŸè§¦å‘ã€é‡è¦å¸‚åœºäº‹ä»¶
- **ç­–ç•¥ç®¡ç†**: å¯ç”¨/æš‚åœç­–ç•¥ã€æŸ¥çœ‹å†å²è®°å½•
- **æ–°é—»æ¨é€**: é‡è¦å¸‚åœºæ–°é—»å®æ—¶æ¨é€

## ğŸ”§ ç³»ç»Ÿç›‘æ§

### 1. ç³»ç»ŸçŠ¶æ€æ£€æŸ¥

```bash
# è·å–è¯¦ç»†ç³»ç»ŸçŠ¶æ€
curl -H "Authorization: Bearer your_token" \
  http://localhost:8000/v1/status

# ç›‘æ§å…³é”®æŒ‡æ ‡
curl -H "Authorization: Bearer your_token" \
  http://localhost:8000/v1/metrics
```

### 2. æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/application.log

# æŸ¥çœ‹äº¤æ˜“æ—¥å¿—
tail -f logs/trading.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f logs/error.log
```

### 3. æ€§èƒ½ç›‘æ§

ç³»ç»Ÿå†…ç½®PrometheusæŒ‡æ ‡æ”¶é›†ï¼š

```bash
# å¯åŠ¨Prometheus
docker run -d -p 9090:9090 prom/prometheus

# å¯åŠ¨Grafana
docker run -d -p 3000:3000 grafana/grafana
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥PostgreSQLæœåŠ¡çŠ¶æ€
sudo systemctl status postgresql

# æ£€æŸ¥è¿æ¥
psql -h localhost -U crypto_trading -d crypto_trading_db

# å¸¸è§è§£å†³æ–¹æ¡ˆ
sudo -u postgres psql -c "ALTER USER crypto_trading PASSWORD 'new_password';"
```

#### 2. Redisè¿æ¥é—®é¢˜

```bash
# æ£€æŸ¥RedisæœåŠ¡
sudo systemctl status redis-server

# æµ‹è¯•è¿æ¥
redis-cli ping

# é‡å¯Redis
sudo systemctl restart redis-server
```

#### 3. äº¤æ˜“æ‰€APIé”™è¯¯

```bash
# æ£€æŸ¥APIå¯†é’¥é…ç½®
grep -E "API_KEY|API_SECRET" config/.env

# éªŒè¯APIè¿æ¥
python -c "
import ccxt
exchange = ccxt.binance({
    'apiKey': 'your_key',
    'secret': 'your_secret',
    'sandbox': True
})
print(exchange.fetch_balance())
"
```

#### 4. LLMæœåŠ¡è¿æ¥é—®é¢˜

```bash
# æµ‹è¯•OpenAIè¿æ¥
python -c "
import openai
client = openai.OpenAI(api_key='your_key')
print(client.models.list())
"
```

### æ—¥å¿—åˆ†æ

```bash
# æŸ¥çœ‹é”™è¯¯æ¨¡å¼
grep "ERROR" logs/application.log | tail -20

# æŸ¥çœ‹æ€§èƒ½é—®é¢˜
grep "slow" logs/application.log | tail -20

# åˆ†æäº¤æ˜“å¤±è´¥
grep "trade.*failed" logs/trading.log | tail -20
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ•°æ®åº“ä¼˜åŒ–

```sql
-- åˆ›å»ºå¿…è¦ç´¢å¼•
CREATE INDEX CONCURRENTLY idx_orders_status_symbol
ON trading_orders(status, symbol);

-- é…ç½®è¿æ¥æ± 
ALTER SYSTEM SET max_connections = 200;
ALTER SYSTEM SET shared_buffers = '8GB';
```

### 2. Redisä¼˜åŒ–

```bash
# é…ç½®Rediså†…å­˜
echo "maxmemory 4gb" >> /etc/redis/redis.conf
echo "maxmemory-policy allkeys-lru" >> /etc/redis/redis.conf

# é‡å¯Redis
sudo systemctl restart redis-server
```

### 3. åº”ç”¨ä¼˜åŒ–

```python
# è°ƒæ•´å¹¶å‘å‚æ•°
# config/config.yaml
system:
  max_concurrent_analysis: 20  # å¢åŠ å¹¶å‘æ•°
  analysis_interval_minutes: 1  # å‡å°‘åˆ†æé—´éš”
```

## ğŸ”’ å®‰å…¨é…ç½®

### 1. APIå®‰å…¨

```bash
# é…ç½®é˜²ç«å¢™
sudo ufw allow 22
sudo ufw allow 80
sudo ufw allow 443
sudo ufw enable

# ä½¿ç”¨Nginxåå‘ä»£ç†
sudo apt install nginx -y
# é…ç½®SSLè¯ä¹¦
sudo certbot --nginx -d your-domain.com
```

### 2. æ•°æ®å®‰å…¨

```bash
# æ•°æ®åº“å¤‡ä»½
crontab -e
# æ·»åŠ æ¯æ—¥å¤‡ä»½ä»»åŠ¡
0 2 * * * pg_dump -U crypto_trading crypto_trading_db | gzip > /backup/db_$(date +\%Y\%m\%d).sql.gz

# é…ç½®æ—¥å¿—è½®è½¬
sudo apt install logrotate -y
```

## ğŸ“ˆ ç›‘æ§å’Œå‘Šè­¦

### 1. Docker Compose ç¯å¢ƒä¸‹çš„ç›‘æ§å¯åŠ¨

```bash
# å¯åŠ¨å®Œæ•´çš„ç›‘æ§æ ˆï¼ˆåŒ…å«Prometheusã€Grafanaã€AlertManagerï¼‰
docker-compose -f docker-compose.monitoring.yml up -d

# æŸ¥çœ‹ç›‘æ§æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.monitoring.yml ps

# è®¿é—®Grafanaä»ªè¡¨æ¿
# URL: http://localhost:3000
# é»˜è®¤ç”¨æˆ·å: admin
# é»˜è®¤å¯†ç : admin
```

### 2. æ ¸å¿ƒç›‘æ§æŒ‡æ ‡

#### ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **APIå“åº”æ—¶é—´**: å¹³å‡å“åº”æ—¶é—´å’ŒP95/P99å»¶è¿Ÿ
- **è¯·æ±‚æˆåŠŸç‡**: HTTP 200å“åº”æ¯”ä¾‹å’Œé”™è¯¯ç‡
- **æ•°æ®åº“è¿æ¥æ± **: æ´»è·ƒè¿æ¥æ•°å’Œç­‰å¾…é˜Ÿåˆ—
- **å†…å­˜ä½¿ç”¨**: åº”ç”¨å†…å­˜æ¶ˆè€—å’ŒGCé¢‘ç‡
- **CPUä½¿ç”¨ç‡**: åº”ç”¨è¿›ç¨‹CPUå ç”¨æƒ…å†µ

#### äº¤æ˜“ä¸šåŠ¡æŒ‡æ ‡
- **ç­–ç•¥æ‰§è¡Œé¢‘ç‡**: æ¯å°æ—¶æ‰§è¡Œçš„ç­–ç•¥æ•°é‡
- **äº¤æ˜“æˆåŠŸç‡**: æˆåŠŸæ‰§è¡Œçš„äº¤æ˜“è®¢å•æ¯”ä¾‹
- **å¹³å‡æŒä»“æ—¶é—´**: ä»å¼€ä»“åˆ°å¹³ä»“çš„å¹³å‡æ—¶é—´
- **ç›ˆäºæ¯”**: å¹³å‡ç›ˆåˆ©ä¸å¹³å‡äºæŸçš„æ¯”å€¼
- **æœ€å¤§å›æ’¤**: å½“å‰æœ€å¤§å›æ’¤ç™¾åˆ†æ¯”

#### é£é™©æ§åˆ¶æŒ‡æ ‡
- **æ­¢æŸè§¦å‘ç‡**: è§¦å‘æ­¢æŸçš„è®¢å•æ¯”ä¾‹
- **ä»“ä½é›†ä¸­åº¦**: å•ä¸€äº¤æ˜“å¯¹å æ€»èµ„é‡‘çš„æ¯”ä¾‹
- **æµåŠ¨æ€§é£é™©**: å¸‚åœºæ·±åº¦ä¸è¶³æ—¶çš„äº¤æ˜“å¤±è´¥ç‡
- **APIè°ƒç”¨é¢‘ç‡**: å„äº¤æ˜“æ‰€APIè°ƒç”¨æ¬¡æ•°å’Œé™åˆ¶çŠ¶æ€

### 3. Grafanaä»ªè¡¨æ¿é…ç½®

#### å¯¼å…¥é¢„ç½®ä»ªè¡¨æ¿
```bash
# å¯¼å…¥ç³»ç»Ÿæ€§èƒ½ä»ªè¡¨æ¿
curl -X POST \
  http://admin:admin@localhost:3000/api/dashboards/db \
  -H 'Content-Type: application/json' \
  -d @monitoring/grafana/dashboards/system-performance.json

# å¯¼å…¥äº¤æ˜“ä¸šåŠ¡ä»ªè¡¨æ¿
curl -X POST \
  http://admin:admin@localhost:3000/api/dashboards/db \
  -H 'Content-Type: application/json' \
  -d @monitoring/grafana/dashboards/trading-business.json

# å¯¼å…¥é£é™©ç›‘æ§ä»ªè¡¨æ¿
curl -X POST \
  http://admin:admin@localhost:3000/api/dashboards/db \
  -H 'Content-Type: application/json' \
  -d @monitoring/grafana/dashboards/risk-monitoring.json
```

#### è‡ªå®šä¹‰ç›‘æ§æŸ¥è¯¢
```promql
# APIå“åº”æ—¶é—´è¶‹åŠ¿
avg(rate(http_request_duration_seconds_sum[5m])) by (endpoint)

# äº¤æ˜“æˆåŠŸç‡
sum(trading_orders_total{status="success"}) / sum(trading_orders_total) * 100

# å½“å‰æŒä»“ä»·å€¼
sum(trading_position_value)

# ç­–ç•¥æ”¶ç›Šç‡
(sum(trading_pnl_total) - sum(trading_fees_total)) / sum(trading_investment_total) * 100
```

### 4. æ™ºèƒ½å‘Šè­¦é…ç½®

#### å‘Šè­¦è§„åˆ™æ–‡ä»¶
```yaml
# monitoring/alerts/trading-rules.yml
groups:
  - name: trading_system_critical
    rules:
      - alert: TradingServiceDown
        expr: up{job="crypto-trading"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "äº¤æ˜“æœåŠ¡ä¸å¯ç”¨"
          description: "äº¤æ˜“æœåŠ¡å·²åœæ­¢å“åº”è¶…è¿‡1åˆ†é’Ÿ"

      - alert: HighErrorRate
        expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "é”™è¯¯ç‡è¿‡é«˜"
          description: "5åˆ†é’Ÿå†…é”™è¯¯ç‡è¶…è¿‡5%"

      - alert: TradingLossThreshold
        expr: trading_daily_pnl < -1000
        for: 0m
        labels:
          severity: critical
        annotations:
          summary: "æ—¥äºæŸè¶…è¿‡é˜ˆå€¼"
          description: "å½“æ—¥äºæŸå·²è¶…è¿‡${{ $value }}ç¾å…ƒ"

      - alert: LLMCostBudgetWarning
        expr: llm_daily_cost > 50
        for: 0m
        labels:
          severity: warning
        annotations:
          summary: "LLMæˆæœ¬é¢„ç®—è­¦å‘Š"
          description: "ä»Šæ—¥LLMè°ƒç”¨æˆæœ¬å·²è¾¾åˆ°${{ $value }}ç¾å…ƒ"

  - name: exchange_connectivity
    rules:
      - alert: ExchangeAPIFailure
        expr: exchange_api_success_rate < 0.95
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "äº¤æ˜“æ‰€APIè¿æ¥å¼‚å¸¸"
          description: "{{ $labels.exchange }} APIæˆåŠŸç‡é™è‡³{{ $value }}%"
```

### 5. å®æ—¶ç›‘æ§å‘½ä»¤

#### Dockerå®¹å™¨ç›‘æ§
```bash
# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ
docker stats --no-stream

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker-compose logs -f app

# æŸ¥çœ‹äº¤æ˜“æ—¥å¿—
docker-compose logs -f worker

# æŸ¥çœ‹ç³»ç»Ÿå¥åº·çŠ¶æ€
curl -s http://localhost:8000/v1/health | jq
```

#### æ•°æ®åº“æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹æ´»è·ƒè¿æ¥æ•°
docker exec -it postgres psql -U crypto_trading -c "
SELECT count(*) as active_connections
FROM pg_stat_activity
WHERE state = 'active';"

# æŸ¥çœ‹æ…¢æŸ¥è¯¢
docker exec -it postgres psql -U crypto_trading -c "
SELECT query, mean_time, calls
FROM pg_stat_statements
ORDER BY mean_time DESC
LIMIT 10;"

# æŸ¥çœ‹æ•°æ®åº“å¤§å°
docker exec -it postgres psql -U crypto_trading -c "
SELECT pg_size_pretty(pg_database_size('crypto_trading_db'));"
```

#### äº¤æ˜“çŠ¶æ€å®æ—¶æŸ¥è¯¢
```bash
# è·å–å½“å‰ç³»ç»ŸçŠ¶æ€
curl -H "Authorization: Bearer your_token" \
  http://localhost:8000/v1/status | jq

# è·å–å®æ—¶æŒä»“ä¿¡æ¯
curl -H "Authorization: Bearer your_token" \
  http://localhost:8000/v1/positions | jq

# è·å–ä»Šæ—¥äº¤æ˜“ç»Ÿè®¡
curl -H "Authorization: Bearer your_token" \
  http://localhost:8000/v1/analytics/daily | jq

# è·å–LLMæˆæœ¬ç»Ÿè®¡
curl -H "Authorization: Bearer your_token" \
  http://localhost:8000/v1/analytics/costs | jq
```

### 6. ç›‘æ§æœ€ä½³å®è·µ

#### è®¾ç½®ç›‘æ§é¢‘ç‡
- **ç³»ç»ŸæŒ‡æ ‡**: æ¯30ç§’æ”¶é›†ä¸€æ¬¡
- **äº¤æ˜“æŒ‡æ ‡**: æ¯1åˆ†é’Ÿæ”¶é›†ä¸€æ¬¡
- **ä¸šåŠ¡æŒ‡æ ‡**: æ¯5åˆ†é’Ÿæ”¶é›†ä¸€æ¬¡
- **æˆæœ¬æŒ‡æ ‡**: æ¯10åˆ†é’Ÿæ”¶é›†ä¸€æ¬¡

#### å‘Šè­¦é€šçŸ¥é…ç½®
```yaml
# monitoring/alertmanager.yml
global:
  smtp_smarthost: 'smtp.gmail.com:587'
  smtp_from: 'alerts@yourcompany.com'

route:
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'web.hook'

receivers:
  - name: 'web.hook'
    email_configs:
      - to: 'admin@yourcompany.com'
        subject: '[{{ .Status | toUpper }}] {{ .GroupLabels.alertname }}'
    slack_configs:
      - api_url: 'https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK'
        channel: '#trading-alerts'
        title: 'äº¤æ˜“ç³»ç»Ÿå‘Šè­¦'
```

#### æ•°æ®ä¿ç•™ç­–ç•¥
```yaml
# Prometheusæ•°æ®ä¿ç•™é…ç½®
global:
  external_labels:
    monitor: 'crypto-trading-monitor'

# æ•°æ®ä¿ç•™ç­–ç•¥
retention_time: 30d
retention_size: 10GB

# å‹ç¼©é…ç½®
compression:
  enabled: true
```

## ğŸ¤ è·å–å¸®åŠ©

- **æ–‡æ¡£**: [https://docs.crypto-ai-trading.com](https://docs.crypto-ai-trading.com)
- **GitHub**: [https://github.com/your-org/crypto-ai-trading](https://github.com/your-org/crypto-ai-trading)
- **é—®é¢˜æŠ¥å‘Š**: [GitHub Issues](https://github.com/your-org/crypto-ai-trading/issues)
- **ç¤¾åŒºæ”¯æŒ**: [Discord Server](https://discord.gg/crypto-trading)

## ğŸ“ éƒ¨ç½²åé…ç½®æ¸…å•

### å¿…é¡»å®Œæˆçš„é…ç½®é¡¹
1. **é…ç½®äº¤æ˜“å¯¹**: æ·»åŠ æ‚¨æƒ³è¦äº¤æ˜“çš„åŠ å¯†è´§å¸å¯¹
2. **è®¾ç½®é£é™©å‚æ•°**: æ ¹æ®æ‚¨çš„é£é™©åå¥½è°ƒæ•´æ­¢ç›ˆæ­¢æŸ
3. **é…ç½®ç›‘æ§å‘Šè­¦**: è®¾ç½®é‚®ç®±å’ŒSlacké€šçŸ¥
4. **å¤‡ä»½ç­–ç•¥**: é…ç½®è‡ªåŠ¨æ•°æ®å¤‡ä»½
5. **å®‰å…¨è®¾ç½®**: å¯ç”¨é˜²ç«å¢™å’ŒSSLè¯ä¹¦

### æ¨èçš„ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
1. **è´Ÿè½½å‡è¡¡**: é…ç½®Nginxåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡
2. **æ•°æ®æŒä¹…åŒ–**: é…ç½®Dockerå·æ˜ å°„å’Œå®šæœŸå¤‡ä»½
3. **æ—¥å¿—ç®¡ç†**: é…ç½®æ—¥å¿—è½®è½¬å’Œé›†ä¸­æ—¥å¿—æ”¶é›†
4. **æ€§èƒ½ä¼˜åŒ–**: è°ƒæ•´æ•°æ®åº“è¿æ¥æ± å’Œç¼“å­˜é…ç½®
5. **é«˜å¯ç”¨éƒ¨ç½²**: é…ç½®å¤šå®ä¾‹å’Œæ•…éšœè½¬ç§»

### å¯åŠ¨æµç¨‹å»ºè®®
1. **å¼€å‘ç¯å¢ƒæµ‹è¯•**: åœ¨æµ‹è¯•ç¯å¢ƒä¸­éªŒè¯æ‰€æœ‰åŠŸèƒ½
2. **æ¨¡æ‹Ÿäº¤æ˜“éªŒè¯**: ä½¿ç”¨æ¨¡æ‹Ÿèµ„é‡‘éªŒè¯ç­–ç•¥æœ‰æ•ˆæ€§
3. **å°èµ„é‡‘è¯•è¿è¡Œ**: ä½¿ç”¨å°é¢èµ„é‡‘æµ‹è¯•ç³»ç»Ÿç¨³å®šæ€§
4. **é€æ­¥å¢åŠ èµ„é‡‘**: æ ¹æ®è¡¨ç°é€æ­¥å¢åŠ äº¤æ˜“èµ„é‡‘
5. **æŒç»­ç›‘æ§ä¼˜åŒ–**: æ ¹æ®å®é™…è¿è¡Œæƒ…å†µä¼˜åŒ–å‚æ•°

## ğŸ”§ å¸¸ç”¨è¿ç»´å‘½ä»¤

### ç³»ç»Ÿç»´æŠ¤
```bash
# æŸ¥çœ‹ç³»ç»Ÿæ•´ä½“çŠ¶æ€
docker-compose ps

# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart

# æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
git pull origin master
docker-compose pull
docker-compose up -d --force-recreate

# æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨
docker stats --no-stream
```

### æ•°æ®åº“ç»´æŠ¤
```bash
# æ•°æ®åº“å¤‡ä»½
docker exec postgres pg_dump -U crypto_trading crypto_trading_db > backup_$(date +%Y%m%d).sql

# æ•°æ®åº“æ¢å¤
docker exec -i postgres psql -U crypto_trading crypto_trading_db < backup_20251008.sql

# æ¸…ç†æ—§æ•°æ®ï¼ˆä¿ç•™30å¤©ï¼‰
docker exec postgres psql -U crypto_trading -c "
DELETE FROM trading_orders WHERE created_at < NOW() - INTERVAL '30 days';"
```

### ç›‘æ§ç»´æŠ¤
```bash
# æŸ¥çœ‹å‘Šè­¦çŠ¶æ€
curl -s http://localhost:9093/api/v1/alerts | jq

# æ¸…ç†Prometheusæ•°æ®
docker exec prometheus rm -rf /prometheus/data/*

# é‡è½½é…ç½®
docker exec prometheus kill -HUP 1
```

## ğŸš¨ ç´§æ€¥æƒ…å†µå¤„ç†

### æœåŠ¡ä¸å¯ç”¨
1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**: `docker-compose ps`
2. **æŸ¥çœ‹é”™è¯¯æ—¥å¿—**: `docker-compose logs app`
3. **é‡å¯æœåŠ¡**: `docker-compose restart app`
4. **æ£€æŸ¥èµ„æº**: `docker stats`

### äº¤æ˜“å¼‚å¸¸
1. **åœæ­¢è‡ªåŠ¨äº¤æ˜“**: è°ƒç”¨APIåœæ­¢ç­–ç•¥
2. **æ£€æŸ¥æŒä»“**: æŸ¥çœ‹å½“å‰æŒä»“çŠ¶æ€
3. **æ‰‹åŠ¨å¹³ä»“**: å¦‚æœ‰å¼‚å¸¸ç«‹å³æ‰‹åŠ¨å¹³ä»“
4. **æ£€æŸ¥API**: éªŒè¯äº¤æ˜“æ‰€APIè¿æ¥

### æ•°æ®å¼‚å¸¸
1. **ç«‹å³å¤‡ä»½**: ç«‹å³å¤‡ä»½æ‰€æœ‰æ•°æ®
2. **æ£€æŸ¥æ•°æ®å®Œæ•´æ€§**: éªŒè¯å…³é”®æ•°æ®
3. **æ¢å¤æ•°æ®**: å¦‚æœ‰æŸåä»å¤‡ä»½æ¢å¤
4. **åˆ†æåŸå› **: æŸ¥çœ‹æ—¥å¿—æ‰¾å‡ºé—®é¢˜åŸå› 

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
- **å®˜æ–¹æ–‡æ¡£**: [https://docs.crypto-ai-trading.com](https://docs.crypto-ai-trading.com)
- **GitHubä»“åº“**: [https://github.com/your-org/crypto-ai-trading](https://github.com/your-org/crypto-ai-trading)
- **é—®é¢˜æŠ¥å‘Š**: [GitHub Issues](https://github.com/your-org/crypto-ai-trading/issues)
- **ç¤¾åŒºæ”¯æŒ**: [Discord Server](https://discord.gg/crypto-trading)

### ç´§æ€¥è”ç³»
- **æŠ€æœ¯æ”¯æŒé‚®ç®±**: support@crypto-ai-trading.com
- **24å°æ—¶ç›‘æ§**: +1-XXX-XXX-XXXX
- **åœ¨çº¿å®¢æœ**: [åœ¨çº¿èŠå¤©](https://crypto-ai-trading.com/chat)

---

âš ï¸ **é‡è¦æé†’**:
- åŠ å¯†è´§å¸äº¤æ˜“å­˜åœ¨æé«˜é£é™©ï¼Œè¯·åœ¨å……åˆ†äº†è§£é£é™©çš„å‰æä¸‹è°¨æ…ä½¿ç”¨æœ¬ç³»ç»Ÿ
- å¼ºçƒˆå»ºè®®å…ˆåœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸­å……åˆ†æµ‹è¯•ç­–ç•¥ï¼Œç¡®è®¤ç³»ç»Ÿç¨³å®šæ€§åå†ä½¿ç”¨çœŸå®èµ„é‡‘
- è¯·ç¡®ä¿æ‚¨æœ‰è¶³å¤Ÿçš„èµ„é‡‘ç®¡ç†çŸ¥è¯†å’Œé£é™©æ‰¿å—èƒ½åŠ›
- ç³»ç»Ÿä¸ä¿è¯ç›ˆåˆ©ï¼Œè¿‡å¾€ä¸šç»©ä¸ä»£è¡¨æœªæ¥è¡¨ç°
- è¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„ï¼Œç¡®ä¿äº¤æ˜“è¡Œä¸ºåˆæ³•åˆè§„

**ç¥æ‚¨äº¤æ˜“é¡ºåˆ©ï¼** ğŸš€